{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 mx-auto text-center">
                <h1 class="mb-3">
                    <i class="fas fa-check-circle text-success me-3"></i>
                    Loan Application Result
                </h1>
                <p class="mb-0">Your loan application has been processed</p>
            </div>
        </div>
    </div>
</div>

<div class="container pb-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="card shadow-sm">
                <div class="card-body p-4">
                    {% if result.status == 'pre_approved' %}
                    <div class="text-center mb-4">
                        <div class="d-inline-block bg-success-light p-3 rounded-circle mb-3">
                            <i class="fas fa-check-circle text-success fs-1"></i>
                        </div>
                        <h2 class="mb-2">Pre-Approved!</h2>
                        <p class="text-muted">Your loan application has been pre-approved</p>
                    </div>
                    
                    <div class="loan-details">
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="detail-item">
                                    <span class="label">Reference ID</span>
                                    <span class="value">{{ result.reference_id }}</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item">
                                    <span class="label">Application Date</span>
                                    <span class="value">{{ result.application_date.strftime('%d %b, %Y') if result.application_date else "Today" }}</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item">
                                    <span class="label">Requested Amount</span>
                                    <span class="value">₹{{ "{:,.0f}".format(result.requested_amount) }}</span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="detail-item">
                                    <span class="label">Pre-Approved Amount</span>
                                    <span class="value">₹{{ "{:,.0f}".format(result.max_amount) }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mt-4">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Next Steps:</strong> Our loan officer will contact you within 24-48 hours to discuss the next steps and document requirements.
                    </div>
                    {% else %}
                    <div class="text-center mb-4">
                        <div class="d-inline-block bg-warning-light p-3 rounded-circle mb-3">
                            <i class="fas fa-exclamation-triangle text-warning fs-1"></i>
                        </div>
                        <h2 class="mb-2">Under Review</h2>
                        <p class="text-muted">Your loan application requires additional review</p>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-info-circle me-2"></i>
                        <strong>Reference ID:</strong> {{ result.reference_id }}<br>
                        <strong>Note:</strong> We need additional information to process your loan application. A representative will contact you shortly.
                    </div>
                    {% endif %}
                    
                    <div class="text-center mt-4">
                        <a href="{{ url_for('loan_calculator') }}" class="btn btn-outline-primary me-2">
                            <i class="fas fa-calculator me-2"></i>Back to Loan Calculator
                        </a>
                        <a href="{{ url_for('index') }}" class="btn btn-primary">
                            <i class="fas fa-home me-2"></i>Go to Homepage
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block styles %}
<style>
    .bg-success-light {
        background-color: rgba(40, 167, 69, 0.1);
    }
    
    .bg-warning-light {
        background-color: rgba(255, 193, 7, 0.1);
    }
    
    .loan-details {
        background: #f8f9fa;
        border-radius: 0.5rem;
        padding: 1.5rem;
        margin: 1.5rem 0;
    }
    
    .detail-item {
        display: flex;
        flex-direction: column;
    }
    
    .detail-item .label {
        font-size: 0.875rem;
        color: #6c757d;
        margin-bottom: 0.25rem;
    }
    
    .detail-item .value {
        font-size: 1.15rem;
        font-weight: 600;
    }
</style>
{% endblock %}
